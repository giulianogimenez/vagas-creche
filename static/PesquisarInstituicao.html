<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Creche</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">
    <link rel="stylesheet" href="css/stylesCreche.css"/>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <script type="text/javascript">
        $(document).ready(function(){
          $.ajax({
            url: '/instituicao/busca/todos/',
            dataType: 'json',
            success: function(data) {
              $.each(data, function(i, item) { 	
                $("#results").append("<p>" + item.nome + "<br>" + item.dataCadastro + "</p>");
                $("#results").append("<hr class='styleHrPesquisa'>");

              });
             }
          });
          
          $("#btnPesq").click(function(){
        	  var instituicao = $("#instituicao").val().toString();
        	  var pattern = /^\d+$/;
              var verify = pattern.test(instituicao);
              
        	  if(instituicao == ""){
        		  $.ajax({
						type:"GET",
        	            url: '/instituicao/busca/todos/',
        	            dataType: 'json',
        	            success: function(data) {
        	              $("#results").empty();
        	              $.each(data, function(i, item) { 	
        	                $("#results").append("<p>" + item.nome + "<br>" + item.dataCadastro + "</p>");
        	                $("#results").append("<hr class='styleHrPesquisa'>");
        	              });
        	             }
        	         });
        		  
        	  }else if(verify == false){
        		  $.ajax({
				    type:"GET",
      	            url: '/instituicao/busca/nome/'+instituicao,
      	            dataType: 'json',
      	            success: function(data) {
      	                $("#results").empty();
      	                $("#results").append("<p>" + data.nome + "<br>" + data.dataCadastro + "</p>");
      	                $("#results").append("<hr class='styleHrPesquisa'>");
      	             }
      	         });
        	  }
        	  
        	  else{
        		  $.ajax({
  				    type:"GET",
        	            url: '/instituicao/busca/id/'+instituicao,
        	            dataType: 'json',
        	            success: function(data) {
        	                $("#results").empty();
        	                $("#results").append("<p>" + data.nome + "<br>" + data.dataCadastro + "</p>");
        	                $("#results").append("<hr class='styleHrPesquisa'>");
        	             }
        	         });
        	     }
        	  
        	});          
        });
  	</script>
  </head>
  <body>
      <div class="container">
        <div class="col-lg-4 col-lg-offset-4 centerPesquisa" id="blocoInstituicao">
            <div class="row">
              <div class="col-lg-6 logo" align="left">
                <img id="img" src="imagens/logo.png" alt="">
              </div>
              <div class="col-lg-6 logo" align="center">
                <p class="styleTitulos">Instituição</p>
              </div>
              <div class="col-lg-8" align="left">
                  <input class="searchInstituicaoStyle" required type="text" name="instituicao" id="instituicao" placeholder="Nome da Instituição">
              </div>
              <div class="col-lg-2">
                <input type="submit" name="btnPesq" id="btnPesq" value="Pesquisar">
              </div>
            </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="scrollbar" id="results" >
              </div>
            </div>
          </div>
        </div>
      </div>
  </body>
</html>
