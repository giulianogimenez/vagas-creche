<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Creche</title>
    <link rel="stylesheet" href="css/bootstrap-min.css">
    <link rel="stylesheet" href="css/stylesCreche.css"/>
    <script src="js/jquery.js"></script>
    <script src="js/jquery-ui.js"></script>
    <link rel="stylesheet" href="css/jquery-ui.css">
    <script src="js/pooper.js"></script>
    <script src="js/bootstrap-min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
          $.ajax({
            url: '/instituicao/busca/todos/',
            dataType: 'json',
            headers:{
            	"Authorization": localStorage.getItem('token')
            },
            success: function(data) {
              $.each(data, function(i, item) { 	
                $("#results").append("<p>" + item.nome + "</p>");
                $("#results").append("<hr class='styleHrPesquisa'>");

              });
             }
          });
          
          $("#btnPesq").click(function(){
        	  var instituicao = $("#instituicao").val().toString();
        	  var pattern = /^\d+$/;
              var verify = pattern.test(instituicao);
              
        	  if(instituicao == ""){
        		  $.ajax({
						type:"GET",
        	            url: '/instituicao/busca/todos/',
        	            dataType: 'json',
        	            headers:{
        	            	"Authorization": localStorage.getItem('token')
        	            },
        	            success: function(data) {
        	              $("#results").empty();
        	              $.each(data, function(i, item) { 	
        	                $("#results").append("<p>" + item.nome + "<br>" + item.dataCadastro + "</p>");
        	                $("#results").append("<hr class='styleHrPesquisa'>");
        	              });
        	             }
        	         });
        		  
        	  }else if(verify == false){
        		  $.ajax({
				    type:"GET",
      	            url: '/instituicao/busca/nome/'+instituicao,
      	            dataType: 'json',
      	            headers:{
      	            	"Authorization": localStorage.getItem('token')
      	            },
      	            success: function(data) {
      	                $("#results").empty();
      	                $("#results").append("<p>" + data.nome + "<br>" + data.dataCadastro + "</p>");
      	                $("#results").append("<hr class='styleHrPesquisa'>");
      	             }
      	         });
        	  }
        	  
        	  else{
        		  $.ajax({
  				    type:"GET",
        	            url: '/instituicao/busca/id/'+instituicao,
        	            dataType: 'json',
        	            headers:{
        	            	"Authorization": localStorage.getItem('token')
        	            },
        	            success: function(data) {
        	                $("#results").empty();
        	                $("#results").append("<p>" + data.nome + "<br>" + data.dataCadastro + "</p>");
        	                $("#results").append("<hr class='styleHrPesquisa'>");
        	             }
        	         });
        	     }
        	  
        	});          
        });
  	</script>
  </head>
  <body>
      <div class="container">
        <div class="col-lg-4 col-lg-offset-4 centerPesquisa" id="blocoInstituicao">
            <div class="row">
              <div class="col-lg-6 logo" align="left">
                <img id="img" src="imagens/logo.png" alt="">
              </div>
              <div class="col-lg-6 logo" align="center">
                <p class="styleTitulos">Instituição</p>
              </div>
              <div class="col-lg-8" align="left">
                  <input class="searchInstituicaoStyle" required type="text" name="instituicao" id="instituicao" placeholder="Nome da Instituição">
              </div>
              <div class="col-lg-2">
                <input type="submit" name="btnPesq" id="btnPesq" value="Pesquisar">
              </div>
            </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="scrollbar" id="results" >
              </div>
            </div>
          </div>
        </div>
      </div>
  </body>
</html>
